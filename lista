package Treinamento.Listagem;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

public class App {
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		Map<LocalDate, List<objVenda>> vendas = new HashMap<>();
		DateTimeFormatter formato = DateTimeFormatter.ofPattern("yyyy-MM-dd");
		DateTimeFormatter formatoAp = DateTimeFormatter.ofPattern("dd/MM/yyyy");
		List<LocalDate> listaDias = new ArrayList<>();
		String dataPreFormatada;
		LocalDate data;
		int loop = 0;
		while (loop == 0) {
			System.out.print("Informe a descrição do produto que foi vendido: ");
			String desc = sc.nextLine();

			if (desc.equals("x")) {
				loop++;
			} else {
				System.out.print("Informe o valor do produto que foi vendido: ");
				double vlr = sc.nextDouble();
				objVenda venda = new objVenda(desc, vlr);
				sc.nextLine();
				System.out.print("Informe a data da venda(yyyy-MM-dd): ");
				dataPreFormatada = sc.nextLine();
				data = LocalDate.parse(dataPreFormatada, formato);
				if (vendas.containsKey(data)) {
					List<objVenda> lista = new ArrayList<>();
					lista = vendas.remove(data);
					lista.add(venda);
					vendas.put(data, lista);
				} else {
					List<objVenda> lista = new ArrayList<>();
					lista.add(venda);
					vendas.put(data, lista);
					listaDias.add(data);
				}
			}
		}
		if (vendas.isEmpty()) {
			System.out.println("Não possui nenhum valor");
		} else {
			listaDias.sort(Comparator.naturalOrder());
			for (int size = 0; size < vendas.size(); size++) {
				List<objVenda> listaVendaDia = new ArrayList<>();
				listaVendaDia = (vendas.get(listaDias.get(size)));

				String diaApresentacao = listaDias.get(size).format(formatoAp);
				System.out.println(diaApresentacao);
				for (int tamanho = 0; tamanho < listaVendaDia.size(); tamanho++) {
					System.out.println(listaVendaDia.get(tamanho));
				}
				System.out.println();
			}

//			 S2
			System.out.println("solução 2");
			vendas.keySet().stream().sorted().forEach(d -> {
				String diaApresentacao = d.format(formatoAp);
				System.out.println(diaApresentacao);
				vendas.get(d).forEach(System.out::println);
				System.out.println();
			});
		}
		sc.close();

	}
	

}

